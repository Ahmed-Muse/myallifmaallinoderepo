{% extends 'allifmaalapp/bases/allifbase.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}
Dashboard
{% endblock %}
{% block style %}
   
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">


<!--FontAwesome CDN ...necessary for the icons-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"
    integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">

<script src="{% static 'js/chart.min.js' %}">/*Remember that this is a dist file.... source is: 
https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js*/

</script>
<!--Chartjs CDN-->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

<style>
    /* Extra small devices (phones, 600px and down) */
@media only screen and (max-width: 600px) {}

/* Small devices (portrait tablets and large phones, 600px and up) */
@media only screen and (min-width: 600px) {}

/* Medium devices (landscape tablets, 768px and up) */
@media only screen and (min-width: 768px) {}

/* Large devices (laptops/desktops, 992px and up) */
@media only screen and (min-width: 992px) {}

/* Extra large devices (large laptops and desktops, 1200px and up) */
@media only screen and (min-width: 1200px) {}

/* .............. note that 1cm = 37.8px.....................*/

  
    body {
        /*background-color: #F6F7F8;*/
        font-size: 2rem;
        opacity: 1;
        position:sticky;
        overflow: auto;
        text-align: left;
        max-width: 100%; 

        /*start of setting up the background image*/
        /*background-image: url('{% static "images/whiteback2.jpg" %}')*/  ; /*....#F6F7FA....*/
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
        background-position: left;
        opacity: 1;
        padding-left: 10px;
        padding: auto;
        /*end of setting up the background image*/
    }
   
    .container{
      background-color: #F6F7F8;
      }
    .container tr:hover {
      background-color: #FFF;
      color: black;
    }
    table{
      background-color: #F6F7F8;
    }
.mybuttonlinks{
    margin-top: 7px; margin-left: 7px;
    margin-bottom: 5px;
 
}
.container tr{
    border: 1px solid black;
}
/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:200px) and (max-width:800px) {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
        .container {
            
            margin-top: 110px;
            /*display: inline-block;
            overflow: auto;*/
            font-size: 0.95rem;
           
            
            color:black;
            overflow: auto;
            overflow-x: scroll;
            overflow-y: scroll;
            height: 480px;
          
        }
        .mycomments{
          display: none;
        }
       
      }
/*********************************************************** end of styling for extra small mobiles*/

  
 
/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:800px) and (max-width:1000px) {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
        .container{
            
            /*display: inline-block;
            overflow: auto;*/
            font-size: 0.95rem;
           
            margin-top: 8px;
            margin-left: auto;
            padding-left: 90px;
            
           
            
            
        }
        
      }
/*********************************************************** end of styling for extra small mobiles*/

 
/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:1000px) and (max-width:2000px) {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
        .container {
            
            margin-top: 10px;
            display: block;
           
            font-size: 0.95rem;
            
            margin-left:auto ;
            
            margin-right: auto;
            margin: auto;
            padding-left: 90px;
            
            
          
        }
        
      }
/*********************************************************** end of styling for extra small mobiles*/

/************************************************************* starting of styling for extra small mobiles*/
@media screen and (min-width:2000px)  {
        /*@media screen and (min-width: 700px) and (max-width:800px) {}*/
        /*.sidenav {padding-top: 15px;}*/
        /*.sidenav a {font-size: 18px;}*/
       .container {
            
            margin-top: 10px;
            display: block;
            overflow: auto;
            font-size: 1.00rem;
            
            margin-left: 120px;
            overflow-x: hidden;
            margin-right: 20px;
            
          
        }
      }
/*********************************************************** end of styling for extra small mobiles*/
 
    </style>
   {%endblock%}
   
   {% block body %}
 
<div class="container"><!--start of main container of the page--...#17a2b8;  -->

    <!--start of first row-->
    <div class="row mt-4" >
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header text-white" style="background-color:#714b67;">
                   Quick Links
                </div>
                <div >
                    
                <a  href="">
                    <button type="button" class="btn btn-success mybuttonlinks " style="background-color: #714b67;">
                        Customers</button></a>
                    <a  href="">
                    <button type="button" class="btn btn-success mybuttonlinks" style="background-color: #714b67;">
                    Vehicles</button></a>
                    <a  href="" >
                    <button type="button" class="btn btn-success mybuttonlinks" style="background-color: #714b67;">
                    Tasks</button></a>
                    </div>

                    <div class="row mt-4" >
                    <div class="col-md-6"> 
                        <a class="text-decoration-none text-dark" href="">
                            <div class="card my-card shadow text-center p-3">
                            <h6>Posted Invoices</h6>
                                <strong>{{no_of_posted_invs}} </strong>
                            </div></a></div>
                            

                            <div class="col-md-6"> 
                                <a class="text-decoration-none text-dark" href="">
                                    <div class="card my-card shadow text-center p-3">
                                       <h6>Drivers</h6>
                                        <strong>{{no_of_drivers}}</strong>
                                    </div></a></div>

                                    </div>

                <div class="row mt-4" >
                    <div class="col-md-6"> 
                        <a class="text-decoration-none text-dark" href="">
                            <div class="card my-card shadow text-center p-3">
                            <h6>Vehicles</h6>
                                <strong>{{no_of_cars}}</strong>
                            </div></a></div>


                <div class="col-md-6"> 
                    <a class="text-decoration-none text-dark" href="">
                        <div class="card my-card shadow text-center p-3">
                        <h6>Customers</h6>
                            <strong>{{no_of_customers}}</strong>
                        </div></a></div>

            </div>
                
            </div>
        </div>
        

        <div class="col-md-4">
            <div class="card">
                <div class="card-header text-white" style="background-color: #714b67;">
                    Fuel Card Balances
                </div>
                

                <div class="col-md-12">
                    <div class="column" style="background-color:#F6F7F8;">
                      
                      <canvas id="myChart3" width="400" height="300"></canvas>
                              <script>
                                  var ctx3 = document.getElementById('myChart3').getContext('2d');
                                  var myChart3 = new Chart(ctx3, {
                                      type: 'bar',

                                      data: {
                                        labels: [{% for items in cards %} '{{items.name}}', {% endfor %}],

                                          datasets: [{
                                            
                                              label: 'Fuel Card Balances',
                                              data: [{% for items in cards %} {{items.balance}}, {% endfor %}],
                                              backgroundColor: [
                                                  'rgba(255, 99, 132, 1)',
                                                  'rgba(54, 162, 235, 1)',
                                                  'rgba(255, 206, 86, 1)',
                                                  'rgba(75, 192, 192, 1)',
                                                  'rgba(153, 102, 255, 1)',
                                                  'rgba(255, 159, 64, 1)',
                                                  'rgba(255, 99, 132, 1)',
                                                  '#f8912ab',
                                              ],
                                              borderColor: [
                                                  'rgba(255, 99, 132, 1)',
                                                  'rgba(54, 162, 235, 1)',
                                                  'rgba(255, 206, 86, 1)',
                                                  'rgba(75, 192, 192, 1)',
                                                  'rgba(153, 102, 255, 1)',
                                                  'rgba(255, 159, 64, 1)',
                                                  'rgba(255, 159, 64, 1)',
                                                  'rgba(255, 159, 64, 1)',
                                                  'rgba(255, 159, 64, 1)',
                                              ],
                                              borderWidth: 1
                                          }]
                                      },
                                      options: {
                                          scales: {
                                              yAxes: [{
                                                  ticks: {
                                                      beginAtZero: true
                                                  }
                                              }]
                                          }
                                      }
                                  });
                              </script>
                    </div>
                    </div>
                    </div></div>

                    <div class="col-md-4">
                    <div class="card">
                    <div class="card-header text-white" style="background-color: #714b67;">
                    Total Fuel Consumption Per Vehicle
                    </div>
                    
                        <div class="column" style="background-color:#F6F7F8;">
                          
                          <canvas id="myChart5" width="150" height="100"></canvas>
                                  <script>
                                      var ctx5 = document.getElementById('myChart5').getContext('2d');
                                      var myChart5 = new Chart(ctx5, {
                                          type: 'line',
                                          data: {
                                              labels: [{% for items in vehicles %} '{{items.vehicle_name}}', {% endfor %}],
                                              datasets: [{
                                                  label: 'Fuel Consumption Per Vehicle',
                                                  data: [{% for items in vehicles %} {{items.fuel_usage}}, {% endfor %}],
                                                  
                                                  borderColor: [
                                                      'rgba(255, 99, 132, 1)',
                                                      'rgba(54, 162, 235, 1)',
                                                      'rgba(255, 206, 86, 1)',
                                                      'rgba(75, 192, 192, 1)',
                                                      'rgba(153, 102, 255, 1)',
                                                      'rgba(255, 159, 64, 1)'
                                                  ],
                                                  borderWidth: 1
                                              }]
                                          },
                                          options: {
                                              scales: {
                                                  yAxes: [{
                                                      ticks: {
                                                          beginAtZero: true
                                                      }
                                                  }]
                                              }
                                          }
                                      });
                                  </script>
                        </div>
                        </div>

            </div></div>

            <!--end of first row-->

            <!--start of second row-->

            
    <div class="row mt-12" >
        <div class="col-md-4">
            <div class="card">
                <div class="card-header text-white" style="background-color: #714b67;">
                   Customers
                </div>
                <div>
                <a  href="" >
                    <button type="button" class="btn btn-success mybuttonlinks" style="background-color: #714b67;" >
                        Shipments</button></a>
                    <a  href="" >
                    <button type="button" class="btn btn-success mybuttonlinks" style="background-color: #714b67;">
                    Vehicles</button></a>
                    <a  href="" >
                    <button type="button" class="btn btn-success mybuttonlinks" style="background-color: #714b67;">
                    Carriers</button></a>
                    </div>
            


                    <!--start of the scrollable table section-->
<div style="margin-top: 20px;">

    <style>
        .Allifmaal-scroll-table{
          background-color: #F6F7F8;
          width: auto;
          height: 250px;
          
          overflow-x: scroll;
          overflow-y: scroll;
          margin-left: 2px;
          overflow: auto;
          margin-right: 1px;
        }
        </style>
       
       
        <div class="Allifmaal-scroll-table" style="text-align: center;">

            <table class="table">
                <thead>
                  <tr>
                     
                      <th>Customer</th>
                      <th>Phone</th>
                  
                  </tr></thead>
                  <tbody>
                      {% for item in customers %}
                    <tr>
                      
                      <td>{{item.name|truncatechars:15}}</td>
                      <td>{{item.phone}}</td>
                     
                      
                    </tr>
                   
                    {% endfor %}
                  </tbody>
                </table>
       
        </div>
        <!--end of the scrollable table section-->
        </div>


            </div>

        </div>
        

        <div class="col-md-4">
            <div class="card">
                <div class="card-header text-white" style="background-color: #714b67;">
                Customer Account Balances
                </div>
                

                <div class="col-md-12">
                    <div class="column" style="background-color:#F6F7F8;">
                      
                      <canvas id="myChart6" width="150" height="100"></canvas>
                              <script>
                                  var ctx6 = document.getElementById('myChart6').getContext('2d');
                                  var myChart6 = new Chart(ctx6, {
                                      type: 'line',
                                      data: {
                                          labels: [{% for items in mycustomers %} '{{items.name}}', {% endfor %}],
                                          datasets: [{
                                              label: 'Account Balances',
                                              data: [{% for items in mycustomers %} {{items.balance}}, {% endfor %}],
                                              backgroundColor: [
                                                  'rgba(255, 99, 132, 1)',
                                                  'rgba(54, 162, 235, 1)',
                                                  'rgba(255, 206, 86, 1)',
                                                  'rgba(75, 192, 192, 1)',
                                                  'rgba(153, 102, 255, 1)',
                                                  'rgba(255, 159, 64, 1)',
                                                  'rgba(255, 99, 132, 1)',
                                                  '#f8912ab',
                                              ],
                                              
                                              borderColor: [
                                                  'rgba(255, 99, 132, 1)',
                                                  'rgba(54, 162, 235, 1)',
                                                  'rgba(255, 206, 86, 1)',
                                                  'rgba(75, 192, 192, 1)',
                                                  'rgba(153, 102, 255, 1)',
                                                  'rgba(255, 159, 64, 1)'
                                              ],
                                              borderWidth: 1
                                          }]
                                      },
                                      options: {
                                          scales: {
                                              yAxes: [{
                                                  ticks: {
                                                      beginAtZero: true
                                                  }
                                              }]
                                          }
                                      }
                                  });
                              </script>
                    </div>
                    </div>
                    </div></div>

                    <div class="col-md-4">
                    <div class="card">
                    <div class="card-header text-white" style="background-color: #714b67;">
                    Posted Invoices With Highest Amounts
                    </div>
                    
                        <div class="column" style="background-color:#F6F7F8;">
                          
                          <canvas id="myChart7" width="150" height="100"></canvas>
                                  <script>
                                      var ctx7 = document.getElementById('myChart7').getContext('2d');
                                      var myChart7 = new Chart(ctx7, {
                                          type: 'bar',
                                          data: {
                                              labels: [{% for items in posted_inv_totals %} '{{items.customer}}', {% endfor %}],
                                              datasets: [{
                                                  label: 'Posted Invoices',
                                                  data: [{% for items in posted_inv_totals %} {{items.invoice_total}}, {% endfor %}],
                                                  backgroundColor: [
                                                      'rgba(255, 99, 132, 1)',
                                                      'rgba(54, 162, 235, 1)',
                                                      'rgba(255, 206, 86, 1)',
                                                      'rgba(75, 192, 192, 1)',
                                                      'rgba(153, 102, 255, 1)',
                                                      'rgba(255, 159, 64, 1)',
                                                      'rgba(255, 99, 132, 1)',
                                                      '#f8912ab',
                                                  ],
                                                  borderColor: [
                                                      'rgba(255, 99, 132, 1)',
                                                      'rgba(54, 162, 235, 1)',
                                                      'rgba(255, 206, 86, 1)',
                                                      'rgba(75, 192, 192, 1)',
                                                      'rgba(153, 102, 255, 1)',
                                                      'rgba(255, 159, 64, 1)'
                                                  ],
                                                  borderWidth: 1
                                              }]
                                          },
                                          options: {
                                              scales: {
                                                  yAxes: [{
                                                      ticks: {
                                                          beginAtZero: true
                                                      }
                                                  }]
                                              }
                                          }
                                      });
                                  </script>
                        </div>
                        </div>

            </div></div>
            <!--end of second row-->
            <hr>
        
    
</div><!--end of main container of the page-->


   {% endblock %}